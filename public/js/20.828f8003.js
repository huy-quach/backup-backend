"use strict";(self["webpackChunksell_furniture_frontend"]=self["webpackChunksell_furniture_frontend"]||[]).push([[20],{9020:function(t,o,a){a.r(o),a.d(o,{default:function(){return M}});var i=a(641),n=a(33),s=a(3751);const e=t=>((0,i.Qi)("data-v-a11a6086"),t=t(),(0,i.jt)(),t),r={class:"product-detail-page"},c={key:0,class:"product-container"},u={class:"image-slider"},d={class:"image-slide"},l=["src"],p={class:"product-info"},h={key:0},k={key:1,class:"out-of-stock"},m={class:"quantity-group"},y=e((()=>(0,i.Lk)("label",{for:"quantity"},"Quantity:",-1))),g=["max"],L={class:"action-buttons"},f={key:1},v=e((()=>(0,i.Lk)("p",null,"Loading product details...",-1))),b=[v];function C(t,o,a,e,v,C){const w=(0,i.g2)("LoginPrompt");return(0,i.uX)(),(0,i.CE)("div",r,[v.product?((0,i.uX)(),(0,i.CE)("div",c,[(0,i.Lk)("div",u,[(0,i.Lk)("div",d,[(0,i.Lk)("img",{src:`http://localhost:5000/uploads/${v.product.image}`,alt:"Product Image",class:"product-image"},null,8,l)])]),(0,i.Lk)("div",p,[(0,i.Lk)("h2",null,(0,n.v_)(v.product.name),1),(0,i.Lk)("p",null,(0,n.v_)(v.product.description),1),(0,i.Lk)("p",null,"Price: $"+(0,n.v_)(v.product.price),1),(0,i.Lk)("p",null,"Material: "+(0,n.v_)(v.product.material),1),v.product.quantity>0?((0,i.uX)(),(0,i.CE)("p",h,"Quantity Available: "+(0,n.v_)(v.product.quantity),1)):((0,i.uX)(),(0,i.CE)("p",k,"Out of Stock")),(0,i.Lk)("div",m,[y,(0,i.bo)((0,i.Lk)("input",{type:"number","onUpdate:modelValue":o[0]||(o[0]=t=>v.quantity=t),min:"1",max:v.product.quantity},null,8,g),[[s.Jo,v.quantity]])]),(0,i.Lk)("div",L,[(0,i.Lk)("button",{class:"add-to-cart",onClick:o[1]||(o[1]=t=>C.checkAuth("addToCart"))},"Add to Cart"),(0,i.Lk)("button",{class:"buy-now",onClick:o[2]||(o[2]=t=>C.checkAuth("buyNow"))},"Buy Now")])])])):((0,i.uX)(),(0,i.CE)("div",f,b)),(0,i.bF)(w,{show:v.showLoginPrompt,onClose:o[3]||(o[3]=t=>v.showLoginPrompt=!1)},null,8,["show"])])}const w=t=>((0,i.Qi)("data-v-f758adde"),t=t(),(0,i.jt)(),t),_={key:0,class:"modal-backdrop"},q={class:"modal-content"},$=w((()=>(0,i.Lk)("h3",null,"Thông báo",-1))),T=w((()=>(0,i.Lk)("p",null,"Bạn cần phải đăng nhập để mua sản phẩm!",-1))),A={class:"modal-actions"};function P(t,o,a,n,s,e){return a.show?((0,i.uX)(),(0,i.CE)("div",_,[(0,i.Lk)("div",q,[$,T,(0,i.Lk)("div",A,[(0,i.Lk)("button",{onClick:o[0]||(o[0]=(...t)=>e.goToLogin&&e.goToLogin(...t))},"Đăng nhập"),(0,i.Lk)("button",{onClick:o[1]||(o[1]=(...t)=>e.closeModal&&e.closeModal(...t))},"Đóng")])])])):(0,i.Q3)("",!0)}a(4114);var E={props:{show:{type:Boolean,default:!1}},methods:{closeModal(){this.$emit("close")},goToLogin(){this.$emit("close"),this.$router.push("/login")}}},N=a(6262);const X=(0,N.A)(E,[["render",P],["__scopeId","data-v-f758adde"]]);var Q=X,j={data(){return{product:null,quantity:1,showLoginPrompt:!1}},components:{LoginPrompt:Q},computed:{isAuthenticated(){return this.$store.getters.isAuthenticated}},async created(){const t=this.$route.params.id;try{const o=await fetch(`http://localhost:5000/api/furniture/${t}`);o.ok?this.product=await o.json():console.error("Failed to fetch product details")}catch(o){console.error("Error fetching product details:",o)}},methods:{checkAuth(t){this.isAuthenticated?"addToCart"===t?this.addToCart():"buyNow"===t&&this.buyNow():this.showLoginPrompt=!0},addToCart(){const t={_id:this.product._id,name:this.product.name,price:this.product.price,material:this.product.material,image:this.product.image,quantity:this.quantity};this.$store.dispatch("addToCart",t)},async buyNow(){try{const t=await fetch(`http://localhost:5000/api/furniture/buy/${this.product._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantity:this.quantity})});t.ok?console.log(`Bought ${this.quantity} ${this.product.name}`):console.error("Failed to buy product")}catch(t){console.error("Error buying product:",t)}}}};const B=(0,N.A)(j,[["render",C],["__scopeId","data-v-a11a6086"]]);var M=B}}]);
//# sourceMappingURL=20.828f8003.js.map